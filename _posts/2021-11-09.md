---
title:  "[Code] 폴더 안의 폴더 순회"
excerpt: "Python에서 폴더 안의 폴더를 순회하는 함수에 관한 글입니다."

toc: true
toc_sticky: true
toc_label: "주요 목차"
 
date: 2021-11-09
last_modified_at: 2021-11-09

use_math: true
comments: true

categories:
  - ETC
---





- 폴더 안에 폴더가 있는 경우 파일의 처리가 필요함
- 
- (참고문서) [os 라이브러리 문서](https://docs.python.org/ko/3/library/os.path.html)



## 폴더 안의 폴더에 대한 처리

- 

- 경로를 수정하기 쉽게 별도 변수로 생성함

```python
# 패키지 임포트
import os
```



```python
# 폴더 내부의 모든 파일에 대해 전처리 수행하는 함수
def get_files(work_path, output_path):
    file_names = os.listdir(work_path)
    failed = []    # 전처리 실패 파일 목록
    abbreviations = []    # 축약어 목록 리셋
    full_names = make_full_list(path_standard)    # 축약어 처리 기준 목록

    
    for file_name in file_names:
        file_path = os.path.join(work_path, file_name)
        
        # 폴더 안 폴더에 대한 처리
        if os.path.isdir(file_path):
            get_files(file_path, output_path)
            
        # 폴더 안 파일에 대한 처리
        else:
            ext = os.path.splitext(file_path)[-1]
            if ext == '.csv':
                
                # 전처리 수행
                print("전처리 수행 : ", file_path)
                
                try:
                    #file, file_path = prep_out_o(file_path, file_name)    # 전처리 1
                    #file = prep_reconstruct(file, file_path)              # 전처리 2
                except:
                    #failed.append(file_name)
                
                # 축약어 변환 수행
                #abbreviations = make_abb_list(file, abbreviations)
                #abb2full = make_abb_dictionary(abbreviations, full_names)
                #cvt_full_name(file, abb2full)

                
                # 저장
                #save_files(file, output_path, file_name)
                
    print(f"■ 전처리 실패 파일 : {failed}")

# get_files(work_path, output_path)
```

```python
# 폴더가 없으면 생성하는 함수
def make_folder(path):
    print(path)
    try:
        if not os.path.exists(path):
            os.makedirs(path)
    except OSError:
        print(path + '폴더를 생성하지 못했습니다.')

        
# 전처리가 끝난 파일을 저장하는 함수
def save_files(file, output_path, file_name):
    # 저장은 현재 디렉토리에 새로운 폴더 생성 후 저장
    make_folder(output_path)
    file.to_csv(output_path + '\\' + file_name, encoding='utf-8-sig')
```

